import{z as t,c as h,u as j,b as p,a as f,l as w,j as e,F,d as y,e as o,f as n,g as l,h as m,I as c,i,k as d,B as I,t as S}from"./index-DhLl33iT.js";const L=t.object({username:t.string().min(4,"Username must be at least 4 characters"),password:t.string().min(8,"Password must be at least 8 characters")}),k=h("/login")({component:N});function N(){const u=j(s=>s.login),x=p(),r=f({defaultValues:{username:"",password:""},resolver:S(L)}),b=r.handleSubmit(async s=>{try{const{token:a,user:g}=await w(s);localStorage.setItem("session",a),u({user:g,isAuthenticated:!0,token:a}),x({to:"/"})}catch(a){console.error(a)}});return e.jsx(F,{...r,children:e.jsxs("div",{className:"mx-auto flex w-2/4 flex-col items-start gap-4 rounded-md border-4 bg-primary p-8",style:{border:"20px solid",borderImage:`url(${y}) 20`,borderImageSlice:"24"},children:[e.jsx("h1",{className:"mx-auto text-2xl font-bold uppercase",children:"Login"}),e.jsxs("form",{className:"w-full space-y-4",onSubmit:b,children:[e.jsx(o,{name:"username",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Username"}),e.jsx(m,{children:e.jsx(c,{className:i("text-black",{"border-red-500":r.formState.errors.username}),...s})}),e.jsx(d,{})]})}),e.jsx(o,{name:"password",render:({field:s})=>e.jsxs(n,{children:[e.jsx(l,{children:"Password"}),e.jsx(m,{children:e.jsx(c,{type:"password",className:i("text-black",{"border-red-500":r.formState.errors.password}),...s})}),e.jsx(d,{})]})}),e.jsx(I,{variant:"default",type:"submit",children:"Login"})]})]})})}export{k as Route};

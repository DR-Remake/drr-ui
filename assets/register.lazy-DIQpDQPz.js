import{z as a,c as b,u as p,a as w,b as f,r as g,j as e,F as y,d as F,e as n,f as i,g as m,h as d,I as c,i as l,k as x,B as C,t as N}from"./index-DhLl33iT.js";const P=a.object({username:a.string({required_error:"Username is required"}).min(3,"Username must be at least 3 characters").max(32,"Username must be at most 32 characters"),email:a.string({required_error:"Email is required"}).email(),password:a.string({required_error:"Password is required"}).min(8,"Password must be at least 8 characters").max(32,"Password must be at most 32 characters"),passwordConfirmation:a.string({required_error:"Please confirm your password"}).min(8,"Password must be at least 8 characters").max(32,"Password must be at most 32 characters")}).refine(t=>t.password===t.passwordConfirmation,{message:"Passwords do not match",path:["passwordConfirmation"]}),I=b("/register")({component:S});function S(){const t=p(r=>r.login),s=w({resolver:N(P)}),u=f(),h=s.handleSubmit(async r=>{try{const{token:o,user:j}=await g(r);localStorage.setItem("session",o),t({token:o,user:j,isAuthenticated:!0}),u({to:"/"})}catch(o){console.error(o)}});return e.jsx(y,{...s,children:e.jsxs("div",{className:"mx-auto flex w-2/4 flex-col items-start gap-4 rounded-md border-4 bg-primary p-8",style:{border:"20px solid",borderImage:`url(${F}) 20`,borderImageSlice:"30"},children:[e.jsx("h1",{className:"mx-auto text-2xl font-bold uppercase",children:"Create New Account"}),e.jsxs("form",{onSubmit:h,className:"w-full space-y-4",children:[e.jsx(n,{name:"username",render:({field:r})=>e.jsxs(i,{children:[e.jsx(m,{children:"Username"}),e.jsx(d,{children:e.jsx(c,{className:l("text-black",{"border-red-500":s.formState.errors.username}),...r})}),e.jsx(x,{})]})}),e.jsx(n,{name:"email",render:({field:r})=>e.jsxs(i,{children:[e.jsx(m,{children:"Email"}),e.jsx(d,{children:e.jsx(c,{className:l("text-black",{"border-red-500":s.formState.errors.email}),...r})}),e.jsx(x,{})]})}),e.jsx(n,{name:"password",render:({field:r})=>e.jsxs(i,{children:[e.jsx(m,{children:"Password"}),e.jsx(d,{children:e.jsx(c,{type:"password",className:l("text-black",{"border-red-500":s.formState.errors.password}),...r})}),e.jsx(x,{})]})}),e.jsx(n,{name:"passwordConfirmation",render:({field:r})=>e.jsxs(i,{children:[e.jsx(m,{children:"Confirm Password"}),e.jsx(d,{children:e.jsx(c,{type:"password",className:l("text-black",{"border-red-500":s.formState.errors.passwordConfirmation}),...r})}),e.jsx(x,{})]})}),e.jsx(C,{variant:"default",type:"submit",children:"Create"})]})]})})}export{I as Route};
